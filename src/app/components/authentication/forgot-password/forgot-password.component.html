<div class="container">
    <div class="row d-flex justify-content-center my-5">
        <div class="back-div" (click)="goBack()">
            <img src="assets/images/attractions-images/back.png" class="img-fluid back" alt="back" />
        </div>

        <div class="col-12 col-md-6 col-lg-4 d-flex flex-column">
            <img src="tripadvisor.svg" alt="logo" class="img-fluid logo" />
            <h2 class="fw-bold mb-4 pt-4 text-center">Reset your password</h2>

            @if (step === 'email') {
            <form [formGroup]="emailForm" (ngSubmit)="sendOtp()">
                <div class="mb-3 text-start">
                    <label for="email" class="form-label fw-semibold">Email address</label>
                    <input type="email" class="form-control" id="email" formControlName="email" placeholder="Email" />
                </div>
                <div class="d-flex justify-content-center">
                    <button class="btn btn-dark w-75 rounded-pill py-2 mb-4"
                        [disabled]="emailForm.invalid || !sendOtpButton">
                        {{ sendOtpButton ? 'Send OTP' : 'Sending...' }}
                    </button>
                </div>
            </form>
            }


            @if (step === 'verify') {
            <form [formGroup]="otpForm" (ngSubmit)="verifyOtp()">
                <div class="mb-3 text-start">
                    <label for="otp" class="form-label fw-semibold">Enter OTP</label>
                    <input type="text" class="form-control" id="otp" formControlName="otp" placeholder="Enter OTP" />
                </div>
                <div class="d-flex justify-content-center">
                    <button class="btn btn-dark w-75 rounded-pill py-2 mb-4" [disabled]="otpForm.invalid">
                        Verify OTP
                    </button>
                </div>
            </form>
            }

            @if (step === 'reset') {
            <form [formGroup]="resetForm" (ngSubmit)="resetPassword()">
                <div class="mb-3 text-start">
                    <label for="newPassword" class="form-label fw-semibold">New Password</label>
                    <div class="input-group">
                        <input [type]="showNewPassword ? 'text' : 'password'" class="form-control" id="newPassword"
                            formControlName="newPassword" placeholder="New Password" />
                        <span class="input-group-text bg-white border-start-0"
                            (click)="showNewPassword = !showNewPassword" style="cursor: pointer;">
                            <i class="bi" [ngClass]="showNewPassword ? 'bi-eye-slash' : 'bi-eye'"></i>
                        </span>
                    </div>
                </div>

                <div class="d-flex justify-content-center">
                    <button class="btn btn-dark w-75 rounded-pill py-2 mb-4" [disabled]="resetForm.invalid">
                        Reset Password
                    </button>
                </div>
            </form>
            }


            @if (step === 'success') {
            <div class="alert alert-success text-center mt-3">
                <p class="mb-3 fw-semibold">âœ… Password reset successfully!</p>
                <a [routerLink]="['/login']" class="btn btn-success rounded-pill px-4">
                    Go to Login
                </a>
            </div>
            }
        </div>
    </div>
</div>